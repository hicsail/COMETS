"use strict";(self.webpackChunk_bull_board_ui=self.webpackChunk_bull_board_ui||[]).push([["src_components_Icons_ArrowLeft_tsx-src_components_JobCard_JobCard_tsx-src_components_StickyHe-ff89a8"],{637:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(6277),a=n(2784);var l=function(e){var t=e.children,n=e.className;return a.createElement("div",{className:(0,r.Z)("rUtWBR",n)},t)}},4441:(e,t,n)=>{n.d(t,{g:()=>c});var r=n(4942),a=n(6277),l=n(2784);var c=function(e){var t=e.label,n=e.id,c=e.inline,o=e.children;return l.createElement("div",{className:(0,a.Z)("l10fzx",(0,r.Z)({},"xU7tR3",c))},!!t&&!c&&l.createElement("label",{htmlFor:n},t),o,!!t&&c&&l.createElement("label",{htmlFor:n},t))}},2043:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(7462),a=n(4925),l=n(2784),c=n(4441),o=["label","id"],i=function(e){var t=e.label,n=e.id,i=(0,a.Z)(e,o);return l.createElement(c.g,{label:t,id:n},l.createElement("input",(0,r.Z)({id:n,type:"text"},i)))}},1603:(e,t,n)=>{n.d(t,{Y:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},r.createElement("path",{d:"M231.293 473.899l19.799-19.799c4.686-4.686 4.686-12.284 0-16.971L70.393 256 251.092 74.87c4.686-4.686 4.686-12.284 0-16.971L231.293 38.1c-4.686-4.686-12.284-4.686-16.971 0L4.908 247.515c-4.686 4.686-4.686 12.284 0 16.971L214.322 473.9c4.687 4.686 12.285 4.686 16.971-.001z"}))}},5188:(e,t,n)=>{n.d(t,{f:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.createElement("path",{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}))}},4238:(e,t,n)=>{n.d(t,{o:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))}},430:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.createElement("path",{d:"M15 17v-2.99A4 4 0 0 0 11 10H8v5L2 9l6-6v5h3a6 6 0 0 1 6 6v3h-2z"}))}},4810:(e,t,n)=>{n.d(t,{O:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.createElement("path",{d:"M5 4a2 2 0 0 0-2 2v6H0l4 4 4-4H5V6h7l2-2H5zm10 4h-3l4-4 4 4h-3v6a2 2 0 0 1-2 2H6l2-2h7V8z"}))}},2534:(e,t,n)=>{n.d(t,{X:()=>a});var r=n(2784),a=function(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.createElement("path",{d:"M6 2l2-2h4l2 2h4v2H2V2h4zM3 6h14l-1 14H4L3 6zm5 2v10h1V8H8zm3 0v10h1V8h-1z"}))}},262:(e,t,n)=>{n.d(t,{t:()=>ie});var r=n(6684),a=n(2784),l=n(7933),c=n(637),o=n(885),i=n(4577),s=["Data","Options","Logs"],u=n(7774);var m=n(4942),d=n(5896),f=n(5861),p=n(5671),v=n(3144),h=n(7326),g=n(9340),E=n(2963),b=n(1120),y=n(4687),w=n.n(y),x=n(6277),k=n(3416),j=void 0!==window.Worker,Z=null,N=new Map;function O(e,t){return _.apply(this,arguments)}function _(){return(_=(0,f.Z)(w().mark((function e(t,r){var a,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=5;break}return Z||((Z=new Worker(new URL(n.p+n.u("highlight-worker"),n.b))).onmessage=function(e){var t=e.data,n=t.id,r=t.code;N.has(n)&&(0,N.get(n).resolve)(r)}),e.abrupt("return",new Promise((function(e,n){var a,l=(0,k.x0)(5);null===(a=Z)||void 0===a||a.postMessage({id:l,code:t,language:r}),N.set(l,{resolve:function(t){N.delete(l),e(t)},reject:function(){N.delete(l),n()}}),setTimeout((function(){return n()}),6e4)})));case 5:return e.next=7,Promise.all([n.e("vendors-node_modules_highlight_js_es_core_js-node_modules_highlight_js_es_languages_json_js"),n.e("highlight")]).then(n.bind(n,7475));case 7:return a=e.sent,l=a.highlighter,e.abrupt("return",l.highlightAuto(t,[r]).value||"");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){(0,g.Z)(c,e);var t,n,r,l=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,b.Z)(n);if(r){var a=(0,b.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,E.Z)(this,e)});function c(){var e;(0,p.Z)(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=l.call.apply(l,[this].concat(n)),(0,m.Z)((0,h.Z)(e),"codeRef",a.createRef()),e}return(0,v.Z)(c,[{key:"shouldComponentUpdate",value:function(e){return e.language!==this.props.language||(Array.isArray(this.props.children)?this.props.children.some((function(t){return![].concat(e.children).includes(t)})):e.children!==this.props.children)}},{key:"componentDidMount",value:function(){return this.highlightCode()}},{key:"componentDidUpdate",value:function(){return this.highlightCode()}},{key:"render",value:function(){var e=this.props.language;return a.createElement("pre",{ref:this.codeRef},a.createElement("code",{className:(0,x.Z)("hljs",e)}))}},{key:"highlightCode",value:(t=(0,f.Z)(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===(t=this.codeRef.current)||void 0===t?void 0:t.querySelector("code"))){e.next=5;break}return e.next=4,O(this.props.children,this.props.language);case 4:n.innerHTML=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),c}(a.Component),L=function(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},a.createElement("path",{d:"M207.029 381.476 12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}))},z=n(3081),R=n(2043),A=n(7401),C=n(5188),H=n(4238);const S="eEMLnz";var M=function(e){var t,n=null===(t=e.message)||void 0===t||null===(t=t.match(/((info|warn|error)?):/i))||void 0===t?void 0:t[1];return null==n?void 0:n.toLowerCase()};function B(e){return e.map((function(e,t){return{message:e,lineNumber:t+1}}))}var F=function(e){var t=e.actions,n=e.job,r=(0,a.useState)([]),l=(0,o.Z)(r,2),c=l[0],i=l[1],s=(0,a.useState)(!1),m=(0,o.Z)(s,2),d=m[0],p=m[1],v=(0,a.useState)(""),h=(0,o.Z)(v,2),g=h[0],E=h[1],b=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=!0;return t.getJobLogs().then((function(t){e&&i(B(t))})),function(){e=!1}}),[]),(0,z.Y)((0,f.Z)(w().mark((function e(){var n,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=b.current)||void 0===n?void 0:n.querySelector(".".concat(S)),e.next=3,t.getJobLogs();case 3:a=e.sent,i(B(a)),requestAnimationFrame((function(){null==r||r.scrollTo({top:null==r?void 0:r.scrollHeight,behavior:"smooth"})}));case 6:case"end":return e.stop()}}),e)}))),d?2500:null);var y,x=c.filter((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!t||new RegExp("".concat(t),"i").test(e.message)}(e,g)}));return a.createElement("div",{className:"EnrkkZ",ref:b},a.createElement("ul",{className:"k3l0Ki"},a.createElement("li",null,a.createElement("form",{onSubmit:function(e){var t;E((null===(t=e.currentTarget)||void 0===t||null===(t=t.searchQuery)||void 0===t?void 0:t.value)||""),e.preventDefault()}},a.createElement(R.U,{className:"zHydRO",name:"searchQuery",type:"search",placeholder:"Filters",onChange:function(e){var t;null!==(t=e.currentTarget)&&void 0!==t&&t.value||E("")}}))),!n.finishedOn&&a.createElement("li",null,a.createElement(u.z,{isActive:d,onClick:function(){p(!d)}},d?a.createElement(C.f,null):a.createElement(H.o,null))),a.createElement("li",null,a.createElement(u.z,{onClick:(y=b.current,(0,f.Z)(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||document.fullscreenElement===y){e.next=4;break}return e.next=3,y.requestFullscreen();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",document.exitFullscreen());case 5:case"end":return e.stop()}}),e)}))))},a.createElement(A.$,null)))),a.createElement("div",{className:S},a.createElement("pre",null,a.createElement("ol",{style:{paddingInlineStart:"".concat("".concat(x.length).length+1,"ch")}},x.map((function(e){return a.createElement("li",{key:e.lineNumber,className:M(e),"data-line-number":"".concat(e.lineNumber,".")},e.message)}))))))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.selectedTab,n=e.job,r=e.actions,l=(0,d.F)(),c=l.collapseJobData,i=l.collapseJobOptions,s=l.collapseJobError,m=(0,a.useState)({data:!1,options:!1,error:!1}),f=(0,o.Z)(m,2),p=f[0],v=f[1],h=n.stacktrace,g=n.data,E=n.returnValue,b=n.opts,y=n.failedReason;switch(t){case"Data":return c&&!p.data?a.createElement(u.z,{onClick:function(){return v(D(D({},p),{},{data:!0}))}},"Show data ",a.createElement(L,null)):a.createElement(J,{language:"json"},JSON.stringify({data:g,returnValue:E},null,2));case"Options":return i&&!p.options?a.createElement(u.z,{onClick:function(){return v(D(D({},p),{},{options:!0}))}},"Show options ",a.createElement(L,null)):a.createElement(J,{language:"json"},JSON.stringify(b,null,2));case"Error":return 0===h.length?a.createElement("div",{className:"error"},y||"NA"):s&&!p.error?a.createElement(u.z,{onClick:function(){return v(D(D({},p),{},{error:!0}))}},"Show errors ",a.createElement(L,null)):a.createElement(J,{language:"stacktrace",key:"stacktrace"},h.join("\n"));case"Logs":return a.createElement(F,{actions:r,job:n});default:return null}},T=function(e){var t=e.status,n=e.job,r=e.actions,l=function(e,t){var n=(0,a.useState)([]),r=(0,o.Z)(n,2),l=r[0],c=r[1],u=(0,a.useState)(0),m=(0,o.Z)(u,2),d=m[0],f=m[1],p=l[d];return(0,a.useEffect)((function(){var n=e===i.n.failed?["Error"].concat(s):t?[].concat(s,["Error"]):[].concat(s);c(n)}),[e]),{tabs:l.map((function(e,t){return{title:e,isActive:e===p,selectTab:function(){return f(t)}}})),selectedTab:p}}(t,n.isFailed),c=l.tabs,m=l.selectedTab;return 0===c.length?null:a.createElement("div",{className:"btVpoI"},a.createElement("ul",{className:"khjsGk"},c.map((function(e){return a.createElement("li",{key:e.title},a.createElement(u.z,{onClick:e.selectTab,isActive:e.isActive},e.title))}))),a.createElement("div",{className:"BhrxDy"},a.createElement(I,{selectedTab:m,job:n,actions:r})))},V=n(430),U=n(4810),W=n(2534);var K=function(e){var t=e.title,n=e.children;return a.createElement("span",{"data-title":t,className:"Km6UUy"},n)};var q,X={promote:{title:"Promote",Icon:V.m,actionKey:"promoteJob"},clean:{title:"Clean",Icon:W.X,actionKey:"cleanJob"},retry:{title:"Retry",Icon:U.O,actionKey:"retryJob"}},Y=(q={},(0,m.Z)(q,i.n.failed,[X.retry,X.clean]),(0,m.Z)(q,i.n.delayed,[X.promote,X.clean]),(0,m.Z)(q,i.n.completed,[X.retry,X.clean]),(0,m.Z)(q,i.n.waiting,[X.clean]),q),G=function(e){var t=e.actions,n=e.status,r=e.allowRetries,l=Y[n];return l?(r||(l=l.filter((function(e){return"retryJob"!==e.actionKey}))),a.createElement("ul",{className:"FIjbjm"},l.map((function(e){return a.createElement("li",{key:e.title},a.createElement(K,{title:e.title},a.createElement(u.z,{onClick:t[e.actionKey],className:"crgtje"},a.createElement(e.Icon,null))))})))):null};var Q=function(e){var t=e.percentage,n=e.status,r=e.className;return a.createElement("svg",{className:(0,x.Z)("mpWxwy",r),viewBox:"0 0 148 148"},a.createElement("circle",{cx:"70",cy:"70",r:"70",fill:"none",stroke:"#E5E7EB",strokeWidth:"8",strokeLinecap:"round",style:{transform:"translate(4px, 4px)"}}),a.createElement("circle",{cx:"70",cy:"70",r:"70",fill:"none",stroke:n===i.n.failed?"#F56565":"#48BB78",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:"600",strokeDashoffset:600-440*t/100,style:{transform:"translate(4px, -4px) rotate(-90deg)"}}),a.createElement("text",{textAnchor:"middle",x:"74",y:"88"},t,"%"))},$=n(6542),ee=n(4919),te=n(1914),ne=n(6544),re=n(7817);var ae=function(e){return(0,$.Z)(e)?(0,ee.Z)(e,"HH:mm:ss"):(0,te.Z)(e)===(0,te.Z)(new Date)?(0,ee.Z)(e,"MM/dd HH:mm:ss"):(0,ee.Z)(e,"MM/dd/yyyy HH:mm:ss")},le=function(e,t){var n=(0,ne.Z)(e,t),r=n/1e3;return r>5?(0,re.Z)(e,t,{includeSeconds:!0}):r>=1?"".concat(r.toFixed(2)," seconds"):"".concat(n," milliseconds")},ce=function(e){var t=e.job,n=e.status;return a.createElement("div",{className:"HyeswP"},a.createElement("ul",{className:"zNRPYu"},a.createElement("li",null,a.createElement("small",null,"Added at"),a.createElement("time",null,ae(t.timestamp||0))),!!t.delay&&t.delay>0&&n===i.n.delayed&&a.createElement("li",null,a.createElement("small",null,"Will run at"),a.createElement("time",null,ae((t.timestamp||0)+t.delay))),!!t.processedOn&&a.createElement("li",null,a.createElement("small",null,t.delay&&t.delay>0?"delayed for ":"",le(t.processedOn,t.timestamp||0)),a.createElement("small",null,"Process started at"),a.createElement("time",null,ae(t.processedOn))),!!t.finishedOn&&a.createElement("li",null,a.createElement("small",null,le(t.finishedOn,t.processedOn||0)),a.createElement("small",null,t.isFailed&&n!==i.n.active?"Failed":"Finished"," at"),a.createElement("time",null,ae(t.finishedOn)))))},oe=[r.n.active,r.n.completed],ie=function(e){var t,n,o,i,s=e.job,u=e.status,m=e.actions,d=e.readOnlyMode,f=e.allowRetries,p=e.jobUrl;return a.createElement(c.Z,{className:"kxGL7W"},a.createElement("div",{className:"P5lfym"},p?a.createElement(l.rU,{className:"hiWfh8",to:p},a.createElement("span",{title:"#".concat(s.id)},"#",s.id)):a.createElement("span",{title:"#".concat(s.id)},"#",s.id),a.createElement(ce,{job:s,status:u})),a.createElement("div",{className:"BXwLWT"},a.createElement("div",{className:"A9V76b"},a.createElement("h4",null,s.name,s.attempts>1&&a.createElement("span",null,"attempt #",s.attempts),!(null===(t=s.opts)||void 0===t||null===(t=t.repeat)||void 0===t||!t.count)&&a.createElement("span",null,"repeat ",null===(n=s.opts)||void 0===n||null===(n=n.repeat)||void 0===n?void 0:n.count,!(null===(o=s.opts)||void 0===o||null===(o=o.repeat)||void 0===o||!o.limit)&&" / ".concat(null===(i=s.opts)||void 0===i||null===(i=i.repeat)||void 0===i?void 0:i.limit))),!d&&a.createElement(G,{status:u,actions:m,allowRetries:f})),a.createElement("div",{className:"XRq6SL"},a.createElement(T,{status:u,job:s,actions:m}),"number"==typeof s.progress&&a.createElement(Q,{percentage:s.progress,status:s.isFailed&&!oe.includes(u)?r.n.failed:u,className:"WoVp7D"}))))}},3423:(e,t,n)=>{n.d(t,{M:()=>a});var r=n(2784);var a=function(e){var t=e.actions,n=e.children;return r.createElement("div",{className:"sVKf5y"},n,!!t&&r.createElement("div",{className:"STA_ox"},t))}},5054:(e,t,n)=>{n.d(t,{t:()=>f});var r=n(9776),a=n(305),l=n(7267),c=n(1485),o=n(6707),i=n(6195),s=n(3081),u=n(4898),m=n(5896),d=(0,r.Ue)((function(e){return{job:null,status:"latest",loading:!0,updateJob:function(t,n){return e((function(){return{job:t,status:n,loading:!1}}))}}}));function f(){var e,t,n=(0,o.h)(),r=(0,c.u)(),f=(e=(0,l.TH)().pathname,t=(0,l.LX)(e,{path:["/queue/:name/:jobId"],exact:!1,strict:!1}),decodeURIComponent((null==t?void 0:t.params.jobId)||"")),p=(0,u.y)().actions.updateQueues,v=(0,m.F)((function(e){return{confirmJobActions:e.confirmJobActions,pollingInterval:e.pollingInterval}})),h=v.confirmJobActions,g=v.pollingInterval,E=d((function(e){return e})),b=E.job,y=E.status,w=E.loading,x=E.updateJob,k=(0,i.N)().openConfirm,j=function(){return n.getJob(r,f).then((function(e){var t=e.job,n=e.status;return x(t,n)}))},Z=(0,a.G)(f?j:p,k);return{job:b,status:y,loading:w,actions:{getJob:j,pollJob:function(){return(0,s.Y)(j,g>0?1e3*g:null,[r])},promoteJob:function(e){return function(t){return Z((function(){return n.promoteJob(e,t.id)}),"Are you sure that you want to promote this job?",h)}},cleanJob:function(e){return function(t){return Z((function(){return n.cleanJob(e,t.id)}),"Are you sure that you want to clean this job?",h)}},getJobLogs:function(e){return function(t){return function(){return n.getJobLogs(e,t.id)}}},retryJob:function(e,t){return function(r){return Z((function(){return n.retryJob(e,r.id,t)}),"Are you sure that you want to retry this job?",h)}}}}}}}]);